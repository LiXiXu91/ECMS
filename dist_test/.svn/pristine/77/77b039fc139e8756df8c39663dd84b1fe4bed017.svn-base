webpackJsonp([24],{710:function(e,t,n){n(988),n(987);var i=n(5)(n(824),n(936),"data-v-1cccea4b",null);i.options.__file="D:\\baozWork\\fontend\\ECMS\\src\\view\\groupManage\\assignPermission.vue",i.esModule&&Object.keys(i.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),i.options.functional&&console.error("[vue-loader] assignPermission.vue: functional components are not supported with templates, they should use render functions."),e.exports=i.exports},824:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(32);t.default={name:"",data:function(){return{role_id:this.$route.query.id,title:"分配权限",permissionList:[],checkedAll:!1,allIndeterminate:!1}},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},methods:{back:function(){this.$router.push({path:"/groupManage/permissionManage"})},handleSubmit:function(){var e=this,t=[];this.permissionList.forEach(function(e){e.checkedList.forEach(function(e){t.push(e)})}),this.$axios({method:"POST",url:"/index.php?r=uc/organization/permission-change",data:{role_id:this.role_id,name_arr:t}}).then(function(t){1==t.data.status&&(e.$message.success("分配成功"),e.back())})},getPermission:function(){var e=this;this.$axios({method:"POST",url:"/index.php?r=uc/organization/permission-list",data:{role_id:this.role_id}}).then(function(t){var n=t.data;1==n.status&&(e.permissionList=e.dataTrans(n.data.permissionList),e.getAllChecked(!0))})},dataTrans:function(e){return e.forEach(function(e){var t=0;e.checkedList=[],e.list.forEach(function(n){1==n.auth&&(t+=1,e.checkedList.push(n.name)),n.label=n.description,n.value=n.name}),t==e.list.length?e.checked=!0:e.checked=!1,t&&t<e.list.length?e.indeterminate=!0:e.indeterminate=!1}),e},onChange:function(e,t){e.indeterminate=!!e.checkedList.length&&e.checkedList.length<e.list.length,e.checked=e.checkedList.length===e.list.length,this.getAllChecked(!1)},onCheckAllChange:function(e,t,n){t.checked=!t.checked,t.indeterminate=!1,t.checkedList=[],t.checked?t.list.forEach(function(e){t.checkedList.push(e.name)}):t.checkedList=[],this.getAllChecked(!1)},onChangeAll:function(e){this.checkedAll=e.target.checked,this.allIndeterminate=!1,e.target.checked?this.permissionList.forEach(function(e){e.checkedList=[],e.list.forEach(function(t){e.checkedList.push(t.name)}),e.checked=!0}):this.permissionList.forEach(function(e){e.indeterminate=!1,e.checked=!1,e.checkedList=[]})},getAllChecked:function(e){if(e){var t=!1,n=!1;this.permissionList.forEach(function(e){e.list.forEach(function(e){0==e.auth&&(t=!0),1==e.auth&&(n=!0)})}),t&&n?(this.checkedAll=!1,this.allIndeterminate=!0):t&&!n?(this.checkedAll=!1,this.allIndeterminate=!1):(!t&&n||!n&&t)&&(this.checkedAll=!0,this.allIndeterminate=!1)}else{var i=0,s=0,c=0;this.permissionList.forEach(function(e){e.checkedList.length===e.list.length?i+=1:0==e.checkedList.length?s+=1:c+=1}),i==this.permissionList.length?(this.checkedAll=!0,this.allIndeterminate=!1):s==this.permissionList.length?(this.checkedAll=!1,this.allIndeterminate=!1):(this.checkedAll=!0,this.allIndeterminate=!0)}}},created:function(){this.getPermission()},destroyed:function(){}}},853:function(e,t,n){t=e.exports=n(3)(!1),t.push([e.i,"\n.user-manage .content .ant-checkbox-group-item {\n    margin-bottom: 5px;\n    width: 150px;\n}\n",""])},854:function(e,t,n){t=e.exports=n(3)(!1),t.push([e.i,"\n.user-manage[data-v-1cccea4b] {\n  background: #ffffff;\n  height: calc(100vh - 90px);\n  overflow-y: auto;\n}\n.user-manage .header[data-v-1cccea4b] {\n  padding: 0 20px;\n  height: 60px;\n  line-height: 60px;\n  border-bottom: 2px solid #f0f2f5;\n}\n.user-manage .content[data-v-1cccea4b] {\n  padding: 20px;\n}\n",""])},936:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-manage"},[n("div",{staticClass:"header"},[e._v("\n        分配权限\n    ")]),e._v(" "),n("div",{staticClass:"content"},[n("div",[n("a-checkbox",{staticStyle:{"margin-bottom":"30px"},attrs:{checked:e.checkedAll,indeterminate:e.allIndeterminate},on:{change:e.onChangeAll}},[e._v("全选")]),e._v(" "),e._l(e.permissionList,function(t,i){return n("div",{key:i,staticStyle:{"margin-bottom":"30px"}},[n("a-checkbox",{staticStyle:{display:"block","margin-bottom":"5px","font-weight":"700"},attrs:{indeterminate:t.indeterminate,checked:t.checked},on:{change:function(n){e.onCheckAllChange(n,t,i)}}},[e._v("\n                    "+e._s(t.name)+"：\n                ")]),e._v(" "),n("a-checkbox-group",{attrs:{options:t.list},on:{change:function(n){e.onChange(t,i)}},model:{value:t.checkedList,callback:function(n){e.$set(t,"checkedList",n)},expression:"item.checkedList"}})],1)})],2),e._v(" "),n("div",{staticStyle:{"text-align":"center"}},[n("a-button",{staticStyle:{"margin-right":"10px"},on:{click:e.back}},[e._v("返回")]),e._v(" "),n("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary"},on:{click:e.handleSubmit}},[e._v("保存")])],1)])])},staticRenderFns:[]},e.exports.render._withStripped=!0},987:function(e,t,n){var i=n(853);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(4)("10395b91",i,!1)},988:function(e,t,n){var i=n(854);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);n(4)("0b741336",i,!1)}});