webpackJsonp([32],{711:function(t,e,a){a(992);var n=a(5)(a(825),a(939),"data-v-35ca2904",null);n.options.__file="D:\\baozWork\\fontend\\ECMS\\src\\view\\groupManage\\departmentManage.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] departmentManage.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},825:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(32);e.default={name:"",data:function(){return{searchKey:"",page:1,page_size:10,total:0,departmentList:[],columns:[{title:"编号",align:"center",dataIndex:"id"},{title:"部门名称",align:"center",dataIndex:"name"},{title:"上级部门",align:"center",dataIndex:"parent_name"},{title:"负责人",align:"center",dataIndex:"leader"},{title:"设备编号",align:"center",dataIndex:"assistant",width:500,scopedSlots:{customRender:"assistant"}},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],selectedRowKeys:[],robotModal:!1,selectDepartment:{}}},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},methods:{searchList:function(){this.page=1,this.page_size=10,this.getDepartment()},emitEmpty:function(){this.page=1,this.page_size=10,this.searchKey="",this.getDepartment()},onChange:function(t,e){this.page=t,this.page_size=e,this.getDepartment()},onShowSizeChange:function(t,e){this.page=1,this.page_size=e,this.getDepartment()},getDepartment:function(){var t=this;this.$axios({method:"POST",url:"/index.php?r=uc/organization/department",data:{searchKey:this.searchKey,p:this.page,n:this.page_size}}).then(function(e){var a=e.data;1==a.status&&(t.departmentList=a.data.departmentList,t.total=parseInt(a.data.departmentCount))})},setRobot:function(t){n.store.set("editDepartment",t),this.$router.push({path:"/groupManage/setRobot",query:{type:"1"}})},addDepartment:function(){n.store.remove("editDepartment"),this.$router.push({path:"/groupManage/addDepartment"})},edit:function(t){n.store.set("editDepartment",t),this.$router.push({path:"/groupManage/editDepartment",query:{id:t.id}})},del:function(t){var e=this;this.$confirm({title:"确定删除当前部门？",content:"部门删除之后，角色会和被删除部门解绑,是否确定",onOk:function(){e.$axios({method:"POST",url:"/index.php?r=uc/organization/department-del",data:{id_arr:[t]}}).then(function(t){1==t.data.status&&(e.$message.success("删除成功"),e.getDepartment())})}})},onSelectChange:function(t){this.selectedRowKeys=t},delSelect:function(){var t=this;if(0==this.selectedRowKeys.length)return void this.$message.warning("请选择需要删除的部门");this.$axios({method:"POST",url:"/index.php?r=uc/organization/department-del",data:{id_arr:this.selectedRowKeys}}).then(function(e){1==e.data.status&&(t.$message.success("删除成功"),t.getDepartment())})},showRobotModal:function(t){this.selectDepartment=t,this.robotModal=!0}},created:function(){this.getDepartment()}}},858:function(t,e,a){e=t.exports=a(3)(!1),e.push([t.i,"\n.department-manage[data-v-35ca2904] {\n  background: #ffffff;\n  height: calc(100vh - 90px);\n  overflow-y: auto;\n}\n.department-manage .header[data-v-35ca2904] {\n  padding: 0 20px;\n  height: 60px;\n  line-height: 60px;\n  border-bottom: 2px solid #f0f2f5;\n}\n.department-manage .header .add-user[data-v-35ca2904] {\n  margin-top: 14px;\n  float: right;\n}\n.department-manage .content[data-v-35ca2904] {\n  padding: 20px;\n}\n",""])},939:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"department-manage"},[a("div",{staticClass:"header"},[a("a-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入负责人、部门、机器人名称查询"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.searchList()}},model:{value:t.searchKey,callback:function(e){t.searchKey=e},expression:"searchKey"}},[a("a-icon",{directives:[{name:"show",rawName:"v-show",value:t.searchKey,expression:"searchKey"}],staticStyle:{color:"#000000"},attrs:{slot:"suffix",type:"close-circle"},on:{click:t.emitEmpty},slot:"suffix"})],1),t._v(" "),a("a-button",{staticClass:"add-user",attrs:{type:"primary"},on:{click:t.addDepartment}},[t._v("新增")]),t._v(" "),a("a-button",{staticClass:"add-user",staticStyle:{"margin-right":"10px"},on:{click:t.delSelect}},[t._v("删除")])],1),t._v(" "),a("div",{staticClass:"content"},[a("a-table",{attrs:{columns:t.columns,dataSource:t.departmentList,pagination:!1,rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},rowKey:function(t){return t.id}},scopedSlots:t._u([{key:"assistant",fn:function(e,n,i){return[a("div",{staticStyle:{position:"relative"}},[a("div",{staticStyle:{"text-overflow":"ellipsis",overflow:"hidden","white-space":"nowrap","max-width":"400px",display:"inline-block","vertical-align":"bottom"}},t._l(e,function(e){return a("span",{staticStyle:{"margin-right":"5px"}},[t._v("\n                            ["+t._s(e.mobile_serial)+"]"+t._s(e.nickname)+"\n                        ")])}),0),t._v(" "),e.length>0?a("a",{staticStyle:{position:"absolute",right:"-30px",top:"50%",transform:"translateY(-50%)"},attrs:{href:"javascript:void(0);"},on:{click:function(e){t.showRobotModal(n)}}},[t._v("详细")]):t._e()])]}},{key:"action",fn:function(e,n,i){return[a("div",[a("a",{staticStyle:{"padding-right":"15px"},attrs:{href:"javascript:void(0);"},on:{click:function(e){t.setRobot(n)}}},[t._v("新增机器人")]),t._v(" "),a("a",{staticStyle:{"padding-right":"15px"},attrs:{href:"javascript:void(0);"},on:{click:function(e){t.edit(n)}}},[t._v("编辑")]),t._v(" "),a("a",{attrs:{href:"javascript:void(0);"},on:{click:function(e){t.del(n.id)}}},[t._v("删除")])])]}}])}),t._v(" "),a("br"),t._v(" "),a("a-pagination",{staticStyle:{"text-align":"right"},attrs:{showQuickJumper:"",showSizeChanger:"",showTotal:function(t){return"总共"+t+"条"},pageSize:t.page_size,total:t.total,pageSizeOptions:["10","20","30","40","50"]},on:{change:t.onChange,showSizeChange:t.onShowSizeChange},model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}),t._v(" "),a("br")],1),t._v(" "),a("a-modal",{attrs:{title:"设备编号",footer:null,visible:t.robotModal,bodyStyle:{maxHeight:"500px",overflowY:"auto"}},on:{cancel:function(e){t.robotModal=!1}}},[a("div",{},[a("a-form",[a("a-form-item",{attrs:{colon:!0,labelCol:{span:4},wrapperCol:{span:20},label:"部门名称:"}},[a("span",[t._v(t._s(t.selectDepartment.name))])]),t._v(" "),a("a-form-item",{attrs:{colon:!0,labelCol:{span:4},wrapperCol:{span:20},label:"设备编号:"}},t._l(t.selectDepartment.assistant,function(e){return a("span",{staticStyle:{"margin-right":"5px"}},[t._v("\n                        ["+t._s(e.mobile_serial)+"]"+t._s(e.nickname)+"\n                    ")])}),0)],1)],1)])],1)},staticRenderFns:[]},t.exports.render._withStripped=!0},992:function(t,e,a){var n=a(858);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(4)("216befdb",n,!1)}});