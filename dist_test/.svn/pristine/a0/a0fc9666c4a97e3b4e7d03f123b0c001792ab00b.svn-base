webpackJsonp([28],{721:function(e,t,a){a(999);var o=a(5)(a(838),a(945),"data-v-4dc7f732",null);o.options.__file="D:\\baozWork\\fontend\\ECMS\\src\\view\\systemManage\\editRobot.vue",o.esModule&&Object.keys(o.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),o.options.functional&&console.error("[vue-loader] editRobot.vue: functional components are not supported with templates, they should use render functions."),e.exports=o.exports},838:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a(332),r=a.n(o),n=a(32);t.default={name:"editRobot",data:function(){return{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}},mediapath:"",queryForm:{mobile_serial:"",nickname:"",tel:"",robotLabel:[]},previewVisible:!1,loading:!1,form:this.$form.createForm(this),headers:{Authorization:n.store.get("token")},robotLabelAll:[],is_number:!1,tip:"请输入11位手机号码"}},methods:{input_tel:function(e){var t=e.target.value,a=this;this.queryForm.tel=t;var o=/^-?(0|[1-9][0-9]*)(\.[0-9]*)?$/;!isNaN(t)&&o.test(t)?t.length>11?a.queryForm.tel=t.slice(0,t.length-1):11==t.length?(a.is_number=!0,a.tip=""):t.length<11&&(a.tip="请输入11位手机号码",a.is_number=!1):(a.is_number=!1,a.tip="请输入11位手机号码",function(){/^[0-9]+.?[0-9]*$/.test(t.charAt(t.length-1))||(console.log(t.charAt(t.length-1)),a.queryForm.tel=t.split(t.charAt(t.length-1)).join(""))}())},changeRobot:function(e){this.queryForm.robotLabel=e},com_handleCancel:function(){this.$router.push({path:"/systemManage/robotManage"})},handleChange:function(e){if("uploading"===e.file.status)return void(this.loading=!0);"done"===e.file.status?1==e.file.response.status?(this.mediapath=e.file.response.data.path,this.loading=!1):this.$notification.warning({message:"上传错误",description:e.file.response.msg}):"error"===e.file.status&&this.$notification.warning({message:"上传失败",description:"文件"+e.file.name+"上传失败"})},beforeUpload:function(e){console.log("image/jpeg"===e.type);var t="image/jpeg"===e.type||("image/png"===e.type||"image/jpg"===e.type);t||this.$notification.warning({message:"文件格式不正确",description:"文件格式不正确，请选择JPG或PNG。"});var a=e.size/1024/1024<1;return a||(this.$notification.warning({message:"超出文件大小限制",description:"图像不能大于1MB！"}),this.$message.error("图像不能大于1MB！")),t&&a},handlePreview:function(e){this.mediapath=e,this.previewVisible=!0},handleCancel:function(){this.previewVisible=!1},deleteFn:function(){this.mediapath=""},com_handleOk:function(e){var t=this;if(!t.queryForm.mobile_serial)return!1;if(t.mediapath){var a={cmd:2031,fromClientId:this.$store.state.user.user.user_id,toClientId:t.queryForm.username,cmdData:{headImage:t.mediapath},priority:0};this.$ws.sendMsgFun(a),this.$ws.cmd2031=function(e){console.log("更换头像",e)}}if(t.queryForm.nickname){var o={cmd:2027,fromClientId:this.$store.state.user.user.user_id,toClientId:t.queryForm.username,cmdData:{nickname:t.queryForm.nickname},priority:0};this.$ws.sendMsgFun(o),this.$ws.cmd2027=function(e){console.log("昵称",e)}}this.$axios({method:"POST",url:"/index.php?r=uc/system/robot-update",data:r()(t.queryForm,{avatar_url:t.mediapath})}).then(function(e){1==e.data.status&&(t.$notification.success({message:"成功",description:"保存成功",duration:1}),setTimeout(function(){t.$router.push({path:"/systemManage/robotManage"})},1e3))})},refreshGroup:function(){var e=this;this.$axios({method:"POST",url:"/index.php?r=uc/system/robot-detail",data:r()({},{robot_id:e.$route.query.id})}).then(function(t){var a=t.data;1==a.status&&(e.queryForm.robotLabel=[],e.queryForm.mobile_serial=a.data.robot.mobile_serial,e.queryForm.nickname=a.data.robot.nickname,e.queryForm.tel=a.data.robot.tel,e.mediapath=a.data.robot.avatar_url,e.queryForm.username=a.data.robot.username,e.queryForm.id=a.data.robot.id,e.robotLabelAll=a.data.robotLabelAll,a.data.robotLabel.forEach(function(t){e.queryForm.robotLabel.push(t.id)}))})}},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},created:function(){this.refreshGroup()}}},865:function(e,t,a){t=e.exports=a(3)(!1),t.push([e.i,"\n.background-color[data-v-4dc7f732] {\n  background: #fff;\n  height: calc(100vh - 110px);\n  overflow-y: auto;\n}\n.mag_push_title[data-v-4dc7f732] {\n  border-bottom: 1px solid #bbbbbb;\n  margin: 0 0 20px 0;\n  padding: 17px 38px;\n  font-size: 16px;\n  background: #fff;\n}\n.upload[data-v-4dc7f732] {\n  position: relative;\n  height: 112px;\n  width: 112px;\n  margin-left: 25%;\n  float: none !important;\n}\n.upload .up_loading[data-v-4dc7f732] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -7px;\n  margin-left: -7px;\n}\n.upload svg[data-v-4dc7f732] {\n  font-size: 22px;\n}\n.loading[data-v-4dc7f732] {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  margin-top: -7px;\n  margin-left: -7px;\n}\n",""])},945:function(e,t,a){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"background-color"},[a("div",{staticClass:"mag_push_title"},[e._v("修改机器人")]),e._v(" "),a("a-row",[a("a-col",{attrs:{span:"14"}},[a("a-form",{attrs:{form:e.form},on:{submit:e.com_handleOk}},[a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"编号：",validateStatus:e.queryForm.mobile_serial?"success":"error",help:e.queryForm.mobile_serial?"":"请输入编号。。。"}},[a("a-input",{attrs:{placeholder:"请输入编号"},model:{value:e.queryForm.mobile_serial,callback:function(t){e.$set(e.queryForm,"mobile_serial",t)},expression:"queryForm.mobile_serial"}})],1),e._v(" "),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"昵称："}},[a("a-input",{attrs:{placeholder:"请输入昵称"},model:{value:e.queryForm.nickname,callback:function(t){e.$set(e.queryForm,"nickname",t)},expression:"queryForm.nickname"}})],1),e._v(" "),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"手机号：",validateStatus:e.queryForm.tel.length<11?e.is_number?"success":"error":"",help:e.queryForm.tel.length<11?e.tip:""}},[a("a-input",{attrs:{placeholder:"请输入手机号"},on:{change:e.input_tel},model:{value:e.queryForm.tel,callback:function(t){e.$set(e.queryForm,"tel",t)},expression:"queryForm.tel"}})],1),e._v(" "),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"头像："}},[a("a-upload",{attrs:{name:"file",headers:e.headers,beforeUpload:e.beforeUpload,multiple:!0,showUploadList:!1,action:"/index.php?r=uc/user/upload"},on:{change:e.handleChange}},[a("a-button",[a("a-icon",{attrs:{type:"upload"}}),e._v(" Upload\n\t\t\t\t\t    ")],1)],1)],1),e._v(" "),e.mediapath?a("div",{staticClass:"ant-upload-list ant-upload-list-picture-card upload"},[e.loading?a("a-icon",{staticClass:"up_loading",attrs:{type:"loading"}}):e._e(),e._v(" "),e.mediapath?a("div",{staticClass:"ant-upload-list-item ant-upload-list-item-done"},[a("div",{staticClass:"ant-upload-list-item-info"},[a("span",[a("a",{staticClass:"ant-upload-list-item-thumbnail",attrs:{href:"javascript:void(0)",target:"_blank",rel:"noopener noreferrer"}},[a("img",{attrs:{src:e.mediapath,alt:"mediapath"}})])])]),e._v(" "),a("span",{staticClass:"ant-upload-list-item-actions"},[a("a",{attrs:{href:"javascript:void(0)"}},[a("a-icon",{attrs:{type:"eye"},on:{click:function(t){e.handlePreview(e.mediapath)}}})],1),e._v(" "),a("a-icon",{attrs:{type:"delete"},on:{click:function(t){e.deleteFn()}}})],1)]):e._e()],1):e._e(),e._v(" "),a("a-form-item",{attrs:{labelCol:e.labelCol,wrapperCol:e.wrapperCol,label:"选择标签："}},[a("a-select",{attrs:{allowClear:!0,defaultValue:e.queryForm.robotLabel,placeholder:"请选择。。。",mode:"multiple"},on:{change:e.changeRobot}},e._l(e.robotLabelAll,function(t,o){return a("a-select-option",{key:t.id},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.title)+"\n\t\t\t\t\t\t")])}),1)],1),e._v(" "),a("a-form-item",{staticStyle:{"text-align":"right"},attrs:{labelCol:{span:6},wrapperCol:{span:18},label:" ",colon:!1}},[a("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",htmlType:"submit"}},[e._v("提交")]),e._v(" "),a("a-button",{on:{click:e.com_handleCancel}},[e._v("取消")])],1)],1)],1)],1),e._v(" "),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.mediapath}})])],1)},staticRenderFns:[]},e.exports.render._withStripped=!0},999:function(e,t,a){var o=a(865);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a(4)("1c1f484e",o,!1)}});