webpackJsonp([26],{702:function(e,t,n){n(985),n(984);var a=n(5)(n(816),n(934),"data-v-19c7ae18",null);a.options.__file="D:\\baozWork\\fontend\\ECMS\\src\\view\\customerManage\\newFriend.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] newFriend.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},816:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"",data:function(){return{selectTab:"1",newFriendList:[],columns_friend:[{title:"编号",align:"center",dataIndex:"id"},{title:"头像",dataIndex:"avatar_url",align:"center",scopedSlots:{customRender:"avatar_url"}},{title:"昵称",align:"center",dataIndex:"nickname"},{title:"所属机器人",align:"center",dataIndex:"assistant_name"},{title:"招呼消息",align:"center",dataIndex:"hello_msg"},{title:"性别",align:"center",dataIndex:"sex",customRender:function(e,t,n){return 10==e?"男":10==e?"女":"未知"}},{title:"请求来源",align:"center",dataIndex:"friend_from"},{title:"请求时间",align:"center",dataIndex:"created"},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],page:1,page_size:10,total:0}},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},methods:{tabChange:function(e){switch(this.selectTab=e,this.selectTab){case"1":this.getNewFriend();break;case"2":this.getActionHistory()}},onFriendChange:function(e,t){this.page=e,this.page_size=t,this.getCustomer()},onFriendSizeChange:function(e,t){this.page=1,this.page_size=t,this.getNewFriend()},getNewFriend:function(){var e=this;this.$axios({method:"GET",url:"/index.php?r=uc/customer/new-friend",params:{p:this.page,n:this.page_size,department_id:this.$store.state.user.user.department.id}}).then(function(t){var n=t.data;1==n.status&&(e.newFriendList=n.data.list,e.total=parseInt(n.data.count))})},getActionHistory:function(){console.log("获取操作记录")},agree:function(e){if(e.flag)return void this.$message.success("已发送添加指令，请等待或刷新页面");e.flag=!0;var t=this,n={cmd:2026,fromClientId:this.$store.state.user.user.user_id,toClientId:e.assistant_username,cmdData:{username:e.username,ticket:e.ticket},priority:0};this.$ws.sendMsgFun(n),this.$message.success("同意好友请求已发送"),this.$ws.cmd2026=function(){e.flag=!1,t.$router.push({path:"/home/customerDetails",query:{id:e.id}})}},ignore:function(e){var t=this;this.$axios({method:"POST",url:"/index.php?r=uc/customer/agree",data:{friend_id:e,type:20}}).then(function(e){1==e.data.status&&t.getNewFriend()})}},created:function(){this.getNewFriend()}}},850:function(e,t,n){t=e.exports=n(3)(!1),t.push([e.i,"\n.new_friend .ant-table-thead > tr > th,.new_friend .ant-table-tbody > tr > td {\n    padding: 10px;\n}\n",""])},851:function(e,t,n){t=e.exports=n(3)(!1),t.push([e.i,"\n.new_friend[data-v-19c7ae18] {\n  height: calc(100vh - 90px);\n  overflow: auto;\n  background: #ffffff;\n  padding: 25px;\n}\n",""])},934:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"new_friend"},[n("div",{staticClass:"tabs"},[n("a-tabs",{attrs:{defaultActiveKey:e.selectTab},on:{change:e.tabChange}},[n("a-tab-pane",{key:"1",attrs:{tab:"新的朋友"}})],1)],1),e._v(" "),n("div",[1==e.selectTab?n("div",{staticClass:"contact-info"},[n("a-table",{attrs:{columns:e.columns_friend,dataSource:e.newFriendList,pagination:!1},scopedSlots:e._u([{key:"avatar_url",fn:function(e,t,a){return[n("div",[n("a-avatar",{staticStyle:{"border-radius":"5px"},attrs:{src:e,size:48}})],1)]}},{key:"action",fn:function(t,a,i){return[n("div",[n("a",{staticStyle:{"padding-right":"20px"},attrs:{href:"javascript:void(0);"},on:{click:function(t){e.agree(a)}}},[e._v("同意")]),e._v(" "),n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.ignore(a.id)}}},[e._v("忽略")])])]}}])}),e._v(" "),n("br"),e._v(" "),n("a-pagination",{staticStyle:{"text-align":"right"},attrs:{showQuickJumper:"",showSizeChanger:"",showTotal:function(e){return"总共"+e+"条"},pageSize:e.page_size,total:e.total,pageSizeOptions:["10","20","30","40","50"]},on:{change:e.onFriendChange,showSizeChange:e.onFriendSizeChange},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),e._v(" "),n("br")],1):e._e(),e._v(" "),2==e.selectTab?n("div",{staticClass:"contact-info"},[e._v("\n            这是操作记录页面\n        ")]):e._e()])])},staticRenderFns:[]},e.exports.render._withStripped=!0},984:function(e,t,n){var a=n(850);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(4)("42e11ad2",a,!1)},985:function(e,t,n){var a=n(851);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(4)("27e6e148",a,!1)}});