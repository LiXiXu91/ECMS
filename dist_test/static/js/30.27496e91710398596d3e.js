webpackJsonp([30],{1e3:function(e,t,n){var a=n(866);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);n(4)("0d6f48b3",a,!1)},713:function(e,t,n){n(1e3);var a=n(5)(n(830),n(946),"data-v-4ef421fd",null);a.options.__file="D:\\baozWork\\fontend\\ECMS\\src\\view\\groupManage\\userManage.vue",a.esModule&&Object.keys(a.esModule).some(function(e){return"default"!==e&&"__esModule"!==e})&&console.error("named exports are not supported in *.vue files."),a.options.functional&&console.error("[vue-loader] userManage.vue: functional components are not supported with templates, they should use render functions."),e.exports=a.exports},830:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(32);t.default={name:"",data:function(){return{searchKey:"",selectId:"",page:1,page_size:10,total:0,userList:[],columns:[{title:"编号",align:"center",dataIndex:"id"},{title:"真实姓名",align:"center",dataIndex:"real_name"},{title:"用户名",align:"center",dataIndex:"user_name"},{title:"所属部门",align:"center",dataIndex:"department"},{title:"所属角色",align:"center",dataIndex:"role_name"},{title:"电话",align:"center",dataIndex:"tel"},{title:"最后登录",align:"center",dataIndex:"last_login"},{title:"操作",dataIndex:"action",align:"center",scopedSlots:{customRender:"action"}}],departmentTree:[],expandedKeys:[]}},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},methods:{searchList:function(){this.page=1,this.page_size=10,this.getUserList(this.selectId)},emitEmpty:function(){this.page=1,this.page_size=10,this.searchKey="",this.getUserList(this.selectId)},getUserList:function(e){var t=this;this.$axios({method:"POST",url:"/index.php?r=uc/organization/user",data:{department_id:e,searchKey:this.searchKey,p:this.page,n:this.page_size}}).then(function(e){var n=e.data;1==n.status&&(t.userList=n.data.userList,t.total=parseInt(n.data.userCount))})},getDepartment:function(e){var t=this;this.$axios({method:"POST",url:"/index.php?r=uc/organization/permission-dist-department",data:{department_id:this.$store.state.user.user.department.id}}).then(function(n){var a=n.data;1==a.status&&(t.departmentTree=t.listToTree(a.data.departmentList),e&&(t.selectId=t.departmentTree[0].key,t.getUserList(t.departmentTree[0].key)))})},onChange:function(e,t){this.page=e,this.page_size=t,this.getUserList(this.selectId)},onShowSizeChange:function(e,t){this.page=1,this.page_size=t,this.getUserList(this.selectId)},onSelect:function(e,t){console.log("selected",e[0]),this.selectId=e[0],this.getUserList(e[0])},listToTree:function(e){var t=this,n=[];return e.forEach(function(e){e.children&&e.children.length>0&&(e.children=t.listToTree(e.children),t.expandedKeys.push(e.id)),n.push({title:e.name,key:e.id,children:e.children})}),n},addUser:function(){a.store.remove("editUser"),this.$router.push({path:"/groupManage/addUser"})},edit:function(e){a.store.set("editUser",e),this.$router.push({path:"/groupManage/editUser",query:{id:e.id}})},del:function(e){var t=this;this.$confirm({title:"确定删除当前用户？",onOk:function(){t.$axios({method:"POST",url:"/index.php?r=uc/organization/user-del",data:{id_arr:[e]}}).then(function(e){1==e.data.status&&(t.$message.success("删除成功"),t.getUserList(t.selectId))})}})}},created:function(){this.getDepartment(!0)}}},866:function(e,t,n){t=e.exports=n(3)(!1),t.push([e.i,"\n.user-manage[data-v-4ef421fd] {\n  background: #ffffff;\n}\n.user-manage .left-header[data-v-4ef421fd] {\n  padding: 0 20px;\n  height: 60px;\n  line-height: 60px;\n  border-bottom: 2px solid #f0f2f5;\n}\n.user-manage .right-header[data-v-4ef421fd] {\n  padding: 0 20px;\n  height: 60px;\n  line-height: 60px;\n  border-left: 2px solid #f0f2f5;\n  text-align: left;\n  font-size: 14px;\n}\n.user-manage .right-header .add-user[data-v-4ef421fd] {\n  margin-top: 14px;\n  float: right;\n}\n.user-manage .left-content[data-v-4ef421fd] {\n  padding: 20px;\n  overflow-y: auto;\n  height: calc(100vh - 175px);\n}\n.user-manage .right-content[data-v-4ef421fd] {\n  border-left: 2px solid #f0f2f5;\n  padding: 20px;\n  overflow-y: auto;\n  height: calc(100vh - 175px);\n}\n",""])},946:function(e,t,n){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-manage"},[n("a-row",[n("a-col",{attrs:{xl:4,sm:6}},[n("div",{staticClass:"left-header"},[e._v("\n                部门结构\n            ")]),e._v(" "),n("div",{staticClass:"left-content"},[n("a-tree",{attrs:{treeData:e.departmentTree,defaultExpandAll:!0,expandedKeys:e.expandedKeys},on:{select:e.onSelect}})],1)]),e._v(" "),n("a-col",{attrs:{xl:20,sm:18}},[n("div",{staticClass:"right-header"},[n("a-input",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入编号、真实姓名、用户名查询"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.searchList()}},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}},[n("a-icon",{directives:[{name:"show",rawName:"v-show",value:e.searchKey,expression:"searchKey"}],staticStyle:{color:"#000000"},attrs:{slot:"suffix",type:"close-circle"},on:{click:e.emitEmpty},slot:"suffix"})],1),e._v(" "),n("a-button",{staticClass:"add-user",attrs:{type:"primary"},on:{click:e.addUser}},[e._v("新增")])],1),e._v(" "),n("div",{staticClass:"right-content"},[n("a-table",{attrs:{columns:e.columns,dataSource:e.userList,pagination:!1},scopedSlots:e._u([{key:"action",fn:function(t,a,s){return[n("div",[n("a",{staticStyle:{"padding-right":"15px"},attrs:{href:"javascript:void(0);"},on:{click:function(t){e.edit(a)}}},[e._v("编辑")]),e._v(" "),n("a",{attrs:{href:"javascript:void(0);"},on:{click:function(t){e.del(a.id)}}},[e._v("删除")])])]}}])}),e._v(" "),n("br"),e._v(" "),n("a-pagination",{staticStyle:{"text-align":"right"},attrs:{showQuickJumper:"",showSizeChanger:"",showTotal:function(e){return"总共"+e+"条"},pageSize:e.page_size,total:e.total,pageSizeOptions:["10","20","30","40","50"]},on:{change:e.onChange,showSizeChange:e.onShowSizeChange},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}}),e._v(" "),n("br")],1)])],1)],1)},staticRenderFns:[]},e.exports.render._withStripped=!0}});