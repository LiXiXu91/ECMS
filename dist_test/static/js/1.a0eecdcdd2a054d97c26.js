webpackJsonp([1],{1003:function(t,e,a){var n=a(869);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(4)("6e17079b",n,!1)},118:function(t,e,a){a(1003);var n=a(5)(a(826),a(948),"data-v-568a1d2e",null);n.options.__file="D:\\baozWork\\fontend\\ECMS\\src\\view\\groupManage\\editDepartment.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] editDepartment.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},826:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(32);e.default={name:"",data:function(){return{form:this.$form.createForm(this),id:this.$route.query.id,type:this.$route.query.type,title:"修改用户",departmentInfo:{},departmentList:[],leaderList:[],robotList:[],selectRobot:[]}},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},methods:{back:function(){this.$router.push({path:"/groupManage/departmentManage"})},getDepartment:function(){var t=this;this.$axios({method:"POST",url:"/index.php?r=uc/organization/permission-dist-department",data:{department_id:this.id?this.departmentInfo.id:this.$store.state.user.user.department.id,type:this.id?"1":"2"}}).then(function(e){var a=e.data;1==a.status&&(t.departmentList=a.data.departmentList)})},getLeader:function(){var t=this;this.$axios({method:"POST",url:"/index.php?r=uc/organization/user",data:{department_id:this.departmentInfo.id,type:"1"}}).then(function(e){var a=e.data;1==a.status&&(t.leaderList=a.data.userList)})},getRobot:function(){var t=this;this.$axios({method:"POST",url:"/index.php?r=uc/organization/assistant-list",data:{department_id:this.departmentInfo.id}}).then(function(e){var a=e.data;1==a.status&&(t.robotList=a.data)})},getQrcode:function(){var t=this;this.$axios({method:"POST",url:"/index.php?r=uc/organization/department-details",data:{department_id:n.store.get("editDepartment").id}}).then(function(e){var a=e.data;1==a.status&&(t.departmentInfo=a.data)})},handleSubmit:function(){var t=this,e="",a="",n={};this.type?this.back():(this.id?(e="/index.php?r=uc/organization/department-update",a="修改部门成功"):(e="/index.php?r=uc/organization/department-add",a="新增部门成功"),this.leaderList.forEach(function(e){e.id==t.departmentInfo.leader_id&&(t.departmentInfo.leader=e.real_name)}),n=this.departmentInfo,this.$axios({method:"POST",url:e,data:n}).then(function(e){1==e.data.status&&(t.$message.success(a),t.back())}))},handleLabelChange:function(t){this.selectRobot=t}},created:function(){this.type?(this.title="设置机器人",this.getQrcode()):(this.id?(this.title="修改部门",this.departmentInfo=n.store.get("editDepartment"),this.departmentInfo.leader_id=0==this.departmentInfo.leader_id?"":this.departmentInfo.leader_id):this.title="添加部门",this.getDepartment(),this.getLeader())},destroyed:function(){n.store.remove("editDepartment")}}},869:function(t,e,a){e=t.exports=a(3)(!1),e.push([t.i,"\n.user-manage[data-v-568a1d2e] {\n  background: #ffffff;\n  height: calc(100vh - 90px);\n  overflow-y: auto;\n}\n.user-manage .header[data-v-568a1d2e] {\n  padding: 0 20px;\n  height: 60px;\n  line-height: 60px;\n  border-bottom: 2px solid #f0f2f5;\n}\n.user-manage .content[data-v-568a1d2e] {\n  padding: 20px;\n}\n",""])},948:function(t,e,a){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"user-manage"},[a("div",{staticClass:"header"},[t._v("\n        "+t._s(t.title)+"\n    ")]),t._v(" "),a("div",{staticClass:"content"},[a("a-form",{attrs:{form:t.form},on:{submit:t.handleSubmit}},[t.type?a("a-form-item",{attrs:{labelCol:{span:3},wrapperCol:{span:18},label:"所属部门"}},[a("span",{staticStyle:{"margin-left":"20px"}},[t._v(t._s(t.departmentInfo.name))])]):t._e(),t._v(" "),t.type?a("a-form-item",{attrs:{labelCol:{span:3},wrapperCol:{span:18},label:"部门机器人"}},t._l(t.departmentInfo.assistant,function(e){return a("span",{staticStyle:{"margin-right":"5px","margin-left":"20px"}},[t._v("\n                    "+t._s(e.nickname)+"\n                ")])}),0):t._e(),t._v(" "),t.type?a("a-form-item",{attrs:{labelCol:{span:3},wrapperCol:{span:18},label:"部门参数码"}},[a("div",[a("a-tooltip",{attrs:{placement:"right"}},[a("template",{slot:"title"},[a("img",{staticStyle:{width:"350px",height:"350px"},attrs:{src:t.departmentInfo.qrcode,alt:""}})]),t._v(" "),a("img",{staticStyle:{width:"200px",height:"200px"},attrs:{src:t.departmentInfo.qrcode,alt:""}})],2)],1),t._v(" "),a("div",{staticStyle:{background:"#f0f2f5",padding:"20px","margin-top":"20px",color:"rgb(0, 121, 254)","font-size":"12px","line-height":"1.8",width:"80%"}},[t._v("\n                    功能：用于实现所属部门下新增机器人"),a("br"),t._v("\n                    操作：1、打开手机端“绑定公司”APP"),a("br"),t._v("\n                       2、点击扫一扫，进入部门详情页，及机器人相关操作"),a("br"),t._v("\n                       3、确认部门信息后，点击授权绑定即可（已绑终端可选择更改授权，或者取消）\n                ")])]):t._e(),t._v(" "),t.type?t._e():a("a-form-item",{attrs:{labelCol:{span:5},wrapperCol:{span:18},label:"部门名称"}},[a("a-input",{staticStyle:{width:"80%"},attrs:{placeholder:"请输入部门名称"},model:{value:t.departmentInfo.name,callback:function(e){t.$set(t.departmentInfo,"name",e)},expression:"departmentInfo.name"}})],1),t._v(" "),t.type?t._e():a("a-form-item",{attrs:{labelCol:{span:5},wrapperCol:{span:18},label:"上级部门"}},[a("a-select",{staticStyle:{width:"300px"},attrs:{placeholder:"下拉选择上级部门",disabled:0==t.departmentInfo.parent_id},model:{value:t.departmentInfo.parent_id,callback:function(e){t.$set(t.departmentInfo,"parent_id",e)},expression:"departmentInfo.parent_id"}},t._l(t.departmentList,function(e,n){return a("a-select-option",{key:e.id},[t._v("\n                        "+t._s(e.name)+"\n                    ")])}),1)],1),t._v(" "),t.type?t._e():a("a-form-item",{directives:[{name:"show",rawName:"v-show",value:!!t.id,expression:"!!id"}],attrs:{labelCol:{span:5},wrapperCol:{span:18},label:"负责人"}},[a("a-select",{staticStyle:{width:"300px"},attrs:{placeholder:"下拉选择负责人"},model:{value:t.departmentInfo.leader_id,callback:function(e){t.$set(t.departmentInfo,"leader_id",e)},expression:"departmentInfo.leader_id"}},t._l(t.leaderList,function(e,n){return a("a-select-option",{key:e.id},[t._v("\n                        "+t._s(e.real_name)+"\n                    ")])}),1)],1),t._v(" "),a("a-form-item",{attrs:{labelCol:{span:3},wrapperCol:{span:18},label:" ",colon:!1}},[a("div",{staticStyle:{width:"80%","text-align":"right"}},[a("a-button",{staticStyle:{"margin-right":"10px"},on:{click:t.back}},[t._v("返回")]),t._v(" "),t.type?t._e():a("a-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",htmlType:"submit"}},[t._v("保存")])],1)])],1)],1)])},staticRenderFns:[]},t.exports.render._withStripped=!0}});