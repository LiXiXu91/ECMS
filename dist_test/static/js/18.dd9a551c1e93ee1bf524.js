webpackJsonp([18],{1018:function(t,a,o){var n=o(884);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);o(4)("2076691a",n,!1)},1019:function(t,a,o){var n=o(885);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);o(4)("831dbec4",n,!1)},724:function(t,a,o){o(1018),o(1019);var n=o(5)(o(841),o(958),"data-v-66629716",null);n.options.__file="D:\\baozWork\\fontend\\ECMS\\src\\view\\systemManage\\robotManage.vue",n.esModule&&Object.keys(n.esModule).some(function(t){return"default"!==t&&"__esModule"!==t})&&console.error("named exports are not supported in *.vue files."),n.options.functional&&console.error("[vue-loader] robotManage.vue: functional components are not supported with templates, they should use render functions."),t.exports=n.exports},841:function(t,a,o){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n=o(332),e=o.n(n);a.default={name:"robotManage",data:function(){return{robotStatus:{},robotList:[],robot_detail_robot:{},robot_detail_label:[],searchKey:"",abnormal:!0}},mounted:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},updated:function(){this.$store.dispatch("setting/getBreadcrumb",this.$route)},computed:{departmentID:function(){return this.$store.state.user.user.department.id}},methods:{onSearch:function(t){this.searchKey=t,this.refreshGroup()},onCheckBox:function(t){this.abnormal=t.target.checked,this.refreshGroup()},edit:function(t){this.$router.push({path:"/systemManage/editRobot",query:{id:t}})},upInfo:function(t){var a={cmd:2036,fromClientId:this.$store.state.user.user.user_id,toClientId:t,cmdData:{username:t}};this.$ws.sendMsgFun(a),this.$message.success("已更新，需要刷新页面获取最新信息")},getRobotInfo:function(t){var a=this;this.$axios({method:"POST",url:"/index.php?r=uc/system/robot-detail",data:e()({},{robot_id:t})}).then(function(t){var o=t.data;1==o.status&&(a.robot_detail_robot=o.data.robot,a.robot_detail_label=o.data.robotLabel)})},refreshGroup:function(){var t=this;this.$axios({method:"POST",url:"/index.php?r=uc/system/robot",data:e()({},{searchKey:t.searchKey,department_id:t.departmentID,abnormal:t.abnormal?1:0})}).then(function(a){var o=a.data;1==o.status&&(t.robotStatus=o.data.robotStatus,t.robotList=o.data.robotList,t.getRobotInfo(t.robotList[0].id))})}},created:function(){this.refreshGroup()}}},884:function(t,a,o){a=t.exports=o(3)(!1),a.push([t.i,"\n.background-color {\n\theight: calc(100vh - 90px);\n\toverflow-y: auto;\n}\n",""])},885:function(t,a,o){a=t.exports=o(3)(!1),a.push([t.i,"\nimg[data-v-66629716] {\n  height: 100%;\n  width: 100%;\n}\n.robot_detail[data-v-66629716] {\n  padding-top: 10px;\n}\n.robot_detail .label[data-v-66629716] {\n  color: #101010;\n}\n.robot_detail .handler .title[data-v-66629716] {\n  color: #101010;\n  text-align: left;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  font-size: 20px;\n}\n.robot_detail .card[data-v-66629716] {\n  margin-top: 30px;\n  background: #fff;\n  padding: 10px;\n}\n.robot_detail .card .head_pic[data-v-66629716] {\n  padding-bottom: 10px;\n}\n.robot_detail .card .head_pic .h_text[data-v-66629716] {\n  width: 50%;\n}\n.robot_detail .card .head_pic .h_text span[data-v-66629716] {\n  vertical-align: middle;\n}\n.robot_detail .card .head_pic .h_text .img[data-v-66629716] {\n  display: inline-block;\n  height: 35px;\n  width: 35px;\n  border-radius: 50%;\n}\n.robot_detail .card .head_pic .h_text .img img[data-v-66629716] {\n  border-radius: 50%;\n}\n.robot_detail .card .head_pic .avatar[data-v-66629716] {\n  width: 50%;\n  text-align: right;\n}\n.robot_detail .card .head_pic .avatar .img[data-v-66629716] {\n  display: inline-block;\n  height: 30px;\n  width: 30px;\n  cursor: pointer;\n}\n.robot_detail .card .card_dec[data-v-66629716] {\n  padding-bottom: 10px;\n}\n.robot_detail .card .card_dec .label_btn[data-v-66629716] {\n  padding: 5px 10px;\n  display: inline-block;\n  color: #a6aaae;\n  background-color: #f3f3f3;\n  margin-bottom: 5px;\n  border-radius: 5px;\n}\n.robot_detail .info_box[data-v-66629716] {\n  margin-top: 30px;\n  background: #fff;\n  padding: 10px;\n}\n.robot_detail .info_box .in_detail[data-v-66629716] {\n  padding-bottom: 10px;\n}\n.robot_error .robot_info[data-v-66629716],\n.robot_warning .robot_info[data-v-66629716] {\n  border-left: 1px solid #fff !important;\n}\n.robot_warning[data-v-66629716] {\n  background: #faad14 !important;\n  color: #fff !important;\n}\n.robot_error[data-v-66629716] {\n  background: #ff5050 !important;\n  color: #fff !important;\n}\n.ant-list-item[data-v-66629716]::after {\n  content: '';\n  height: '';\n  visibility: hidden;\n  clear: both;\n}\n.robot_box[data-v-66629716] {\n  height: 44px;\n  cursor: pointer;\n  background: #fff;\n  border-radius: 10px ;\n  padding: 10px;\n  color: #101010;\n  text-align: center;\n}\n.robot_box .state_info[data-v-66629716] {\n  width: 50%;\n  padding-right: 20px;\n}\n.robot_box .state_info .title[data-v-66629716] {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  font-size: 14px ;\n}\n.robot_box .robot_info[data-v-66629716] {\n  border-left: 1px solid #bbb;\n  width: 50%;\n  padding-left: 20px;\n}\n.robot_box .robot_info .tel[data-v-66629716] {\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n  font-size: 14px ;\n}\n.tab[data-v-66629716] {\n  margin: 20px 20px 50px 20px;\n}\n.robotManage .col-margin[data-v-66629716] {\n  padding: 20px;\n  background: #fff;\n}\n.ant-alert[data-v-66629716] {\n  font-size: 14px;\n  font-variant: tabular-nums;\n  line-height: 1.5;\n  color: rgba(0, 0, 0, 0.65);\n  box-sizing: border-box;\n  margin: 0 0 0 0;\n  list-style: none;\n  position: relative;\n  padding: 5px 15px 5px 37px;\n  border-radius: 4px;\n  border: 1px solid #91d5ff;\n  background-color: #e6f7ff;\n  display: inline-block;\n}\n.ant-info span[data-v-66629716] {\n  color: #1890ff;\n  margin: 0 2px;\n}\n.ant-info .pointer[data-v-66629716] {\n  cursor: pointer;\n  margin-left: 20px;\n}\n.circle_icon[data-v-66629716] {\n  top: 8px;\n  left: 12px;\n  position: absolute;\n}\n.circle_icon svg[data-v-66629716] {\n  font-size: 16px;\n}\n.clearFloat[data-v-66629716]:after {\n  display: block;\n  clear: both;\n  content: \"\";\n  visibility: hidden;\n  height: 0;\n}\n.clearFloat[data-v-66629716] {\n  zoom: 1;\n}\n.fr[data-v-66629716] {\n  float: right;\n}\n.fl[data-v-66629716] {\n  float: left;\n}\n",""])},958:function(t,a,o){t.exports={render:function(){var t=this,a=t.$createElement,o=t._self._c||a;return o("div",{staticClass:"background-color robotManage"},[o("a-row",[o("a-col",{staticStyle:{"padding-right":"20px"},attrs:{span:"20"}},[o("div",{staticClass:"col-margin"},[o("a-form",{attrs:{layout:"inline"}},[o("a-form-item",[o("a-input-search",{staticStyle:{width:"300px"},attrs:{placeholder:"请输入机器人编号、昵称、手机号"},on:{search:t.onSearch},model:{value:t.searchKey,callback:function(a){t.searchKey=a},expression:"searchKey"}})],1),t._v(" "),o("a-form-item",[o("a-checkbox",{on:{change:t.onCheckBox},model:{value:t.abnormal,callback:function(a){t.abnormal=a},expression:"abnormal"}},[t._v("仅显示异常")])],1),t._v(" "),o("a-form-item",[o("div",{staticClass:"ant-alert"},[o("a-icon",{staticClass:"circle_icon",attrs:{type:"info-circle",theme:"twoTone"}}),t._v(" "),o("span",{staticClass:"ant-info"},[t._v("总共 "+t._s(t.robotStatus.total)+" 台机器  正常 "+t._s(t.robotStatus.normal)+" 台    告警 "+t._s(t.robotStatus.alarm)+" 台   故障 "+t._s(t.robotStatus.fault)+" 台 ")])],1)])],1)],1),t._v(" "),o("div",{staticClass:"tab"},[o("a-list",{attrs:{grid:{gutter:24,lg:4,md:1,sm:1,xs:1},dataSource:t.robotList},scopedSlots:t._u([{key:"renderItem",fn:function(a,n){return o("a-list-item",{},[o("div",{staticClass:"robot_box clearFloat",class:2==a.status?"robot_error":1==a.status?"robot_warning":"",on:{click:function(o){t.getRobotInfo(a.id)}}},[o("div",{staticClass:"fl state_info"},[o("div",{staticClass:"title"},[t._v(t._s(a.mobile_serial))])]),t._v(" "),o("div",{staticClass:"fr robot_info"},[o("div",{staticClass:"tel"},[t._v(t._s(a.nickname)+t._s(a.tel?a.tel:""))])])])])}}])})],1)]),t._v(" "),o("a-col",{staticStyle:{padding:"0 20px","border-left":"1px solid #bbb",height:"calc(100vh - 90px)"},attrs:{span:"4"}},[o("div",{staticClass:"robot_detail"},[o("div",{staticClass:"handler clearFloat"},[o("div",{staticClass:" title"},[t._v(t._s(t.robot_detail_robot.mobile_serial))]),t._v(" "),o("div",[o("a-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",disabled:!t.robot_detail_robot.id},on:{click:function(a){t.edit(t.robot_detail_robot.id)}}},[t._v("编辑")]),t._v(" "),o("a-button",{attrs:{type:"primary",disabled:!t.robot_detail_robot.id},on:{click:function(a){t.upInfo(t.robot_detail_robot.username)}}},[t._v("更新")])],1)]),t._v(" "),o("div",{staticClass:"card"},[o("div",{staticClass:"head_pic clearFloat"},[o("div",{staticClass:"h_text fl"},[o("span",{staticClass:"label"},[t._v("头像：")]),t._v(" "),o("div",{staticClass:"img"},[o("img",{attrs:{src:t.robot_detail_robot.avatar_url}})])]),t._v(" "),o("div",{staticClass:"fr avatar"},[o("a-tooltip",{attrs:{placement:"left"}},[o("template",{slot:"title"},[o("span",[o("img",{attrs:{src:t.robot_detail_robot.qrcode}})])]),t._v(" "),o("div",{staticClass:"img"},[o("img",{attrs:{src:t.robot_detail_robot.qrcode}})])],2)],1)]),t._v(" "),o("div",{staticClass:"card_dec"},[o("span",{staticClass:"label"},[t._v("昵称：")]),t._v(" "),o("span",{staticClass:"desc"},[t._v(t._s(t.robot_detail_robot.nickname))])]),t._v(" "),o("div",{staticClass:"card_dec"},[o("span",{staticClass:"label"},[t._v("wxid：")]),t._v(" "),o("span",{staticClass:"desc"},[t._v(t._s(t.robot_detail_robot.username))])]),t._v(" "),o("div",{staticClass:"card_dec"},[o("span",{staticClass:"label"},[t._v("机器标签：")]),t._v(" "),t._l(t.robot_detail_label,function(a){return o("span",{staticClass:"label_btn"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(a.title)+"\n\t\t\t\t\t\t\t")])})],2)]),t._v(" "),o("div",{staticClass:"info_box"},[o("div",{staticClass:"in_detail"},[o("span",{staticClass:"label"},[t._v("上次心跳：")]),t._v(" "),o("span",{staticClass:"desc"},[t._v(t._s(t.robot_detail_robot.active_time))])])])])])],1)],1)},staticRenderFns:[]},t.exports.render._withStripped=!0}});